# 🌦️ 기상청 API 연동 가이드

## 📋 API 키 발급 받기

### 1. 공공데이터포털 회원가입
```
https://www.data.go.kr/
```
- 회원가입 또는 로그인

### 2. 기상청 단기예보 API 신청

**방법 1: 직접 검색**
1. 검색창에 "기상청 단기예보" 검색
2. "기상청_단기예보 ((구)_동네예보) 조회서비스" 선택
3. "활용신청" 버튼 클릭

**방법 2: 직접 링크**
```
https://www.data.go.kr/data/15084084/openapi.do
```

### 3. 활용 신청
- 상세기능정보에서 필요한 API 선택:
  - ✅ **초단기실황조회** (필수)
  - ✅ **초단기예보조회** (필수)
  - ✅ **단기예보조회** (선택)
- 활용목적: "여행 정보 제공 서비스"
- 신청 완료

### 4. 승인 대기
- 보통 **즉시 승인** 또는 몇 분 내 승인
- 승인되면 "마이페이지 > 오픈API" 에서 확인 가능

### 5. API 키 확인
```
마이페이지 → 오픈API → 개발계정 → 일반 인증키 (Encoding)
```
- 일반 인증키(Encoding) 복사

---

## 🔧 프로젝트에 설정하기

### 1. 환경 변수 파일 수정

**파일: `web/.env.local`**
```bash
# 기상청 API 키 (여기에 발급받은 키 붙여넣기!)
VITE_KMA_API_KEY=여기에_발급받은_API_키_붙여넣기

# 예시:
# VITE_KMA_API_KEY=abcdefghijklmnopqrstuvwxyz1234567890
```

### 2. 서버 재시작
```bash
# 서버 종료 후
cd web
npm run dev
```

---

## ✅ 테스트 방법

### 1. 브라우저에서 앱 접속
```
http://localhost:3000
```

### 2. 지역 상세 화면으로 이동
- 검색 화면에서 아무 지역 선택
- 예: 서울, 부산 등

### 3. 날씨 정보 확인
- 상단에 실시간 날씨 표시됨
- ☀️ 맑음 25℃ 형태로 표시

### 4. 개발자 콘솔 확인 (F12)
```
✅ 백그라운드 기상청 API 성공: 서울 - 맑음, 25℃
```

---

## 🚨 API 키가 없는 경우

**Mock 데이터로 자동 작동:**
- 서울: ☀️ 맑음 23℃
- 부산: 🌤️ 구름조금 25℃
- 제주: 🌧️ 비 20℃

**하지만 실제 날씨가 필요하면 API 키 필수!**

---

## 📝 주의사항

### 트래픽 제한
- 무료: 일일 1,000건
- 충분히 사용 가능!

### 캐시 시스템
- 5분간 캐시 사용
- 중복 요청 방지
- 트래픽 절약

### 백그라운드 로딩
- 즉시 Mock 데이터 표시
- 백그라운드에서 실제 데이터 로딩
- 사용자는 기다리지 않음!

---

## 🎯 API 키 입력 후 동작

```
1. 지역 선택
   ↓
2. Mock 데이터 즉시 표시 (0.1초)
   ↓
3. 백그라운드에서 실제 API 호출 (2초)
   ↓
4. 실제 데이터로 자동 업데이트
   ↓
5. 5분간 캐시 사용 (빠름!)
```

---

## 🔗 관련 파일

- `web/.env.local` - API 키 설정
- `web/src/api/weather.js` - 날씨 API 로직
- `web/src/pages/RegionDetailScreen.jsx` - 날씨 표시

---

**지금 바로 API 키를 발급받고 설정하시겠습니까?** 🌦️

